<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title> Android | Eigenfaces </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900|Cormorant+Garamond:300,300i,400,400i,500,500i,600,600i,700,700i">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"> -->
      <link rel="stylesheet" href="../../../../css/style.css">
      <link rel="stylesheet" href="../../../../css/personal_icon.css">
      <link rel="stylesheet" href="../../../../res/prism_themes/prism-darcula.css">
      <link rel="stylesheet" href="Eigenfaces.css">

  </head>
  <body>

    <!-- Navbar -->

    <header>
      <a href="../../../index.html" class="header-brand"> CAPTAIN </a>
      <nav>
          <ul>
            <li><a href="../../../python/python.html"> Python </a> </li>
            <li><a href="../../../c_plus_plus/c_plus_plus.html"> C++ </a> </li>
            <li><a href="../../android.html"> Android </a> </li>
            <li><a href="../../../matlab/matlab.html"> MATLAB </a> </li>
            <li><a href="../../../web_based_programming/web_based_programming.html"> HTML5 ~ CSS3 ~ JS </a> </li>
            <li><a href="../../../deep_learning/deep_learning.html"> Deep Learning </a> </li>
            <li><a href="../../../../about.html"> About Me</a> </li>
          </ul>
          <div id="dropdown-header" class="dropdown">
            <button class="dropbtn"> Last Projects </button>
              <div class="dropdown-content active">
                <a href="#"> Last Project 1 </a>
                <a href="#"> Last Project 1 </a>
                <a href="#"> Last Project 1 </a>
                <a href="#"> Last Project 1 </a>
                <a href="#"> Last Project 1 </a>
             </div>
        </div>
      </nav>
      <div class="menu-toggle">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </div>
    </header>


    <!-- Return to Top -->
    <a href="javascript:" id="return-to-top"><i class="fas fa-chevron-up"></i></a>

    <!--  -->
    <main>

      <br><br><br><br><br><br>
      <div class="container">

      <article role="article">
    		<div class="head-title">
    			<h1> Eigenfaces </h1>
    			<h2> A Project by Captain Mich </h2>
    			<time> July, 2018 </time>
    		</div>

    		<p> This is an App made for a University project that computes eigenfaces and recognize a person in a given database set </p>

    		<section role="group">
    			<a href="file/eigenfaces.zip" role="button">Download ZIP</a>
    			<a href="https://github.com/CaptainMich/" role="button">Download TAR</a>
    			<a href="https://github.com/CaptainMich/" role="button">Fork on Github</a>
    		</section>

    		<h3> Project Division </h3>
    		<p> Below we are going to divide the project in sections; we also assume that the database is just a folder with color pics inside  </p>
    		<ul>
          <li> 1. Main Activity </li>
          <li> 2. Create Database Class </li>
          <li> 3. Create Image Class </li>
          <li> 4. Create Eigenfaces Class and Task </li>

    			<!-- <li> Built with <abbr title="Syntatically Awesome Stylesheets">Sass</abbr></li>
    			<li> Uses semantic HTML5 elements and <abbr title="Accessible Rich Internet Applications">ARIA</abbr> Roles.</li> -->
    		</ul>

    		<h3> Main Activity </h3>
    		<p> To start, let's go to create a simple graphical interface for our app. It will be made by: </p>
        <ul>
          <li> A button to create the database and compute the eigenfaces </li>
          <li> A button to update the database </li>
          <li> A button to compare a taken picture with the database set </li>
    		</ul>


        <div class="row-full code">
          <pre><code class="language-xml line-numbers">
&lt;?xml version="1.0" encoding="utf-8"?/&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"/&gt;

    &lt;Button
        android:id="@+id/btn_check"
        android:layout_width="352dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="16dp"
        android:text="Check"
        tools:layout_editor_absoluteX="148dp"
        tools:layout_editor_absoluteY="409dp" /&gt;

    &lt;Button
        android:id="@+id/btn_update_db"
        android:layout_width="169dp"
        android:layout_height="wrap_content"
        android:layout_alignParentEnd="true"
        android:layout_alignTop="@+id/btn_load_db"
        android:layout_marginEnd="15dp"
        android:text="Update DB"
        tools:layout_editor_absoluteX="148dp"
        tools:layout_editor_absoluteY="409dp" /&gt;

    &lt;Button
        android:id="@+id/btn_load_db"
        android:layout_width="166dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentStart="true"
        android:layout_marginBottom="71dp"
        android:layout_marginStart="15dp"
        android:text="Load DB"
        tools:layout_editor_absoluteX="148dp"
        tools:layout_editor_absoluteY="409dp" /&gt;

&lt;/RelativeLayout&gt;
      </code></pre>
        </div>

        <figure>
          <img src="img/1.1-Activity_Main_xml.png" alt="" />
          <figcaption> How the app interface looks like </figcaption>
        </figure>

    		<!-- <blockquote>
    			<code>blockquote</code>. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita, distinctio, facere quo laudantium fuga laborum odio eum doloremque officia eligendi voluptatibus id nulla fugit ut ipsum suscipit vel eveniet! Dolore!
    		</blockquote> -->

    		<p> Then we need to link all the created buttons in the Main Activity of our app in order to be able to use them.Two methods are defined: one to initialize the elements of our interface, the other one to initialize the listeners of each button. Then, the two methods are called inside the onCreate. </p> <br>

        <div class="row-full code">
          <pre><code class="language-java line-numbers">
public class MainActivity extends AppCompatActivity {

    private Button btn_Load_Db = null;
    private Button btn_Update_Db = null;
    private Button btn_Check = null;
    private Context context = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        initViews();
        initListeners();
    }

    /**
     * This method is to initialize views
     */
    private void initViews() {

        btn_Load_Db = (Button) findViewById(R.id.btn_load_db);
        btn_Update_Db = (Button) findViewById(R.id.btn_update_db);
        btn_Check = (Button) findViewById(R.id.btn_check);

    }

    /**
     * This method is to initialize listeners
     */
    private void initListeners() {

        btn_Load_Db.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
            }
        });

        btn_Update_Db.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

            }
        });

        btn_Check.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

            }
        });
    }
}
          </code></pre>
        </div>


        <h3> Database Class </h3>
        <p> For reasons of simplifications we are going to assume that the database is just a folder with a given set of color images of any dimension not bigger than 2 MB (simply for a speed time reason, especially on big databses). It's noticeable also that in a database there can be more than one face of a same person; each image should have the same light exposition and each face should be aligned. In our example we are going to take as database set 20 images made of 4 people in 5 different position. </p>

          <figure>
            <img src="img/1.2-DatabaseExample.png" alt="" />
            <figcaption> Example Of Starting Database </figcaption>
          </figure>

        <p> In order to go through the next phases of the project we need to resize the images: we have choosen 256 x 256 pixels as default dimension. We also need to turn them into grayscale to reduce the computational cost of the implementation and compress as '.png' filetype. Let's go into the code: </p> <br>

        <div class="row-full code">
          <pre><code class="language-java line-numbers">
public class Database {

    private String DEFAULT_APP_IMAGEDATA_DIRECTORY;
    private String lastImagePath = "";

    /** Decodes the Bitmap from 'path' and returns it */
    public Bitmap getImage(String path) {
        Bitmap bitmapFromPath = null;
        try {
            bitmapFromPath = BitmapFactory.decodeFile(path);

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }

        return bitmapFromPath;
    }

    /** Returns the String path of the last saved image */
    public String getSavedImagePath() {
        return lastImagePath;
    }

    public boolean putImageWithFullPath(String fullPath, Bitmap theBitmap) {
        return !(fullPath == null || theBitmap == null) && saveBitmap(fullPath, theBitmap);
    }

    public String setupFullPath(String imageName) {
        File mFolder = new File(Environment.getExternalStorageDirectory()+"/APP/DB_bw");

        if (isExternalStorageReadable() && isExternalStorageWritable() && !mFolder.exists()) {
            if (!mFolder.mkdirs()) {
                Log.e("ERROR", "Failed to setup folder");
                return "";
            }
        }

        return mFolder.getPath() + '/' + imageName;
    }

    /** Check if external storage is writable or not */
    public static boolean isExternalStorageWritable() {
        return Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState());
    }

    /** Check if external storage is readable or not */
    public static boolean isExternalStorageReadable() {
        String state = Environment.getExternalStorageState();
        return Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state);
    }

    /** Saves the Bitmap as a PNG file at path 'fullPath' */
    private boolean saveBitmap(String fullPath, Bitmap bitmap) {
        if (fullPath == null || bitmap == null)
            return false;

        boolean fileCreated = false;
        boolean bitmapCompressed = false;
        boolean streamClosed = false;

        File imageFile = new File(fullPath);

        if (imageFile.exists())
            if (!imageFile.delete())
                return false;

        try {
            fileCreated = imageFile.createNewFile();

        } catch (IOException e) {
            e.printStackTrace();
        }

        FileOutputStream out = null;
        try {
            out = new FileOutputStream(imageFile);
            bitmapCompressed = bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);

        } catch (Exception e) {
            e.printStackTrace();
            bitmapCompressed = false;

        } finally {
            if (out != null) {
                try {
                    out.flush();
                    out.close();
                    streamClosed = true;

                } catch (IOException e) {
                    e.printStackTrace();
                    streamClosed = false;
                }
            }
        }

        return (fileCreated && bitmapCompressed && streamClosed);
    }

    public void createDatabase(){

        String folder_path = Environment.getExternalStorageDirectory()+"/APP/DB_colors/";
        String image_path = null;
        File directory = new File(folder_path);
        File[] files = directory.listFiles();

        //Log.d("Files", "Size: "+ files.length);

        if (files != null) {
            for (int i = 0; i < files.length; i++) {
                image_path = folder_path + files[i].getName().toString();
                Bitmap temp = getImage(image_path);
                Bitmap temp_bw = Image.createGrayScale(temp);
                Bitmap resized_temp = Image.resizeImage(temp_bw);
                putImageWithFullPath(setupFullPath(files[i].getName().toString().replace(".jpeg","") + "_bw.png"), resized_temp);
            }
        }
    }



    public int getNumberOfFiles(){

        String folder_path = Environment.getExternalStorageDirectory()+"/APP/DB_colors/";
        File directory = new File(folder_path);
        File[] files = directory.listFiles();

       return files.length;

    }
          </code></pre>
        </div>

        <br>
        <p> We created a public Database class made with some different methods, let's look at them in detail:
        </p>

        <ul>
          <li> <b> getImage </b> -> this method takes in input a file path and return ,if it is possible (see the try and catch block), the decoded file as a Bitmap
          </li>
        </ul>

        <ul>
          <li> <b> getSaveImagedPath </b> -> this method just gives us the path of the last saved image as a string
          </li>
        </ul>

        <ul>
          <li> <b> isExternalStorageWritable </b> -> this method is boolean, it check if external storage is writable or not
          </li>
        </ul>

        <ul>
          <li> <b> isExternalStorageReadable </b> -> this method is boolean, it check if external storage is readable or not
          </li>
        </ul>

        <ul>
          <li> <b> setupFullPath </b> -> this method is used to create our database grayscale folder; if the path is successfully created it is returned as a string.
          </li>
        </ul>

        <ul>
          <li> <b> saveBitmap </b> -> this method is boolean, it save the Bitmap as a '.png' file at the given input path. It return true only if the file is created, the bitmap compression in '.png' is made and the stream is successfully closed.
          </li>
        </ul>

        <ul>
          <li> <b> putImageWithFullPath </b> -> this method take in input the path where you want to save the '.png' image and a Bitmap filetype; using the <code> saveBitmap </code> method, it save the image in the chosen path
          </li>
        </ul>

        <ul>
          <li> <b> createDatabase </b> -> this method combine some other methods of the Image class, that we will create after, to manipulate the image to satisfy our initial working conditions and finally save the garyscale image. <br>
          After checking if the database colors fold exists, we use the <code> putImageWithFullPath </code> method in a for cycle to convert each any dimension colors image to a black and white 256 x 256 pixels '.png' image.
          </li>
        </ul>

        <ul>
          <li> <b> getNumberOfFiles </b> -> this method just gives us the number of files in a chosen directory
          </li>
        </ul>

        <p> To be sure that everything works correctly we need to add the writing permission on the <code> AndroidManifest.xml</code> (it's possible to find it by following this path: 'app' -> 'manifest'):</p> <br>


        <div class="row-full code">
          <pre><code class="language-xml line-numbers">

&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;

      </code></pre>
        </div>


        <h3> Image Class </h3>
    		<p> We are now going to create a class to manage all the image manipulation that we need in our process </p> <br>

        <div class="row-full code">
          <pre><code class="language-java line-numbers">
public class Image {

    private static final String TAG="Image";


    public static  Bitmap resizeImage(Bitmap src){
        if(src!=null)
            return Bitmap.createScaledBitmap(src, 256, 256, true);
        else
            Log.e(TAG,"Error, file don't exist");
        return null;
    }

    public static Bitmap createGrayScale(Bitmap src){
        int width = src.getWidth();
        int height = src.getHeight();

        Bitmap dest = Bitmap.createBitmap(width, height,
                Bitmap.Config.RGB_565);

        Canvas canvas = new Canvas(dest);
        Paint paint = new Paint();
        ColorMatrix colorMatrix = new ColorMatrix();
        colorMatrix.setSaturation(0); //value of 0 maps the color to gray-scale
        ColorMatrixColorFilter filter = new ColorMatrixColorFilter(colorMatrix);
        paint.setColorFilter(filter);
        canvas.drawBitmap(src, 0, 0, paint);

        return dest;
    }
}

          </code></pre>
        </div>

        <p> Let's look at them in detail: </p>

        <ul>
          <li> <b> resizeImage </b> -> this method takes in input a Bitmap and return it scaled
          </li>
        </ul>

        <ul>
          <li> <b> createGrayScale </b> -> this method takes as input a Bitmap and return it in grayscale. To be able to draw something we need the <code> drawBitmap </code> method of canvas class; this method need to work : <br> <br>
             - A Bitmap object to hold the pixels
            <br>
             - A Rect object to rapresent the subset of the bitmap to be drawn
             <br>
             - A Rect object to rapresent that the bitmap will be scaled/translated to fit into
             <br>
             - A Paint object to describe the colors and styles for the drawing
              <br> <br>

            We use the colorMatrix <code> setSaturation </code> method (set to 0 to map the grayscale) as filter for a paint ('it holds the style and color information about how to draw geometries, text and bitmaps' as described by the Android reference) object type. We finally pass it to the canvas object and get our black an white image
          </li>
        </ul>

        <h3> Eigenfaces Class and Task </h3>

        <p> To manage the eigenfaces computation we are gonna work with asyncronous task. Let' see how an asyncronous task work </p>

        <dl>
          <dt> Asyncronous Task </dt>
          <dd> The Android AsyncTask class allows you to perform background processing and then show the results on the UI of the main tread. It is usually used to perform short-term operations. Each asynchronous processing consists of about 4 steps that android executes consecutively and are :
            <br>
            - <code> onPreExecute </code> : all the operations before the task;
            <br>
            - <code> doInBackground </code> : the operations that the task must do;
            <br>
            - <code> onProgressUpdate </code> : used to show the progress of the task;
            <br>
            - <code> onPostExecute </code> : operations to be performed after the task;
            <br>
          </dd>
        </dl>
        <br>

        <p> So, first, let's create a class that extends and overrides the AsyncTask methods by calling it, then we are gonna need a constructor for our class ( we will also use in the code the two previuosly created classes ); finally we are going to call all the four steps of which we have spoken above </p> <br>

        <div class="row-full code">
          <pre><code class="language-java line-numbers">
public class Eigenfaces extends AsyncTask &lt;Database, Integer, Void&gt; {

    private Database db;
    private int imageSize;
    private int M;
    EigenfacesResultTask mCallback = null;
    Context context = null;
    ProgressDialog myProgress = null;


    public Eigenfaces(Context _context, Database db, int imageSize, int M, EigenfacesResultTask myEFRT) {

        context = _context;

        this.db = db;
        this.imageSize = imageSize;
        this.M = 25;                        // number of database images
        this.mCallback = myEFRT;

        myProgress = new ProgressDialog(context);
        myProgress.setTitle("Processing Data");
        myProgress.setMessage("Please wait...");
        myProgress.setMax(100);
        myProgress.setIndeterminate(false);
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

        //myProgress.show();
    }


    @Override
    protected Void doInBackground(Database... params) {
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        myProgress.setProgress(values[0]);
    }

    /**
     * @Override protected void onPostExecute(String result) {
     * super.onPostExecute(result);
     * mCallback.onTaskComplete(result);
     * }
     **/

}
          </code></pre>
        </div>

        <p> We can now go deeper in the code; we have to deal with the images, manipulate them. First of all, let's consider an image as a 'n x m' matrix, in our case we will have a square matrix of order 256, where each element of the matrix is composed by a value from 0 to 255 (the images are black and white). Called <b> I<sub>1</sub> </b> the image of the first subject, we have a 256 x 256 matrix that we want to rapresent as a unique concatenated column vector that we are going to call <b> &#915;<sub>1</sub> </b>. So, let's add a method inside the Image class that take as input a Bitmap (matrix) and return a concatenated column vector of that image : </p> <br>

        <div class="row-full code">
          <pre><code class="language-java line-numbers">
public static double[] getColumnVector(Bitmap src, int imageSize){

    Bitmap bitmap = src; // assign your bitmap here
    int pixelCount = 0;
    double[] bitmap_column = new double[imageSize];

    for (int y = 0; y < bitmap.getHeight(); y++)
    {
        for (int x = 0; x < bitmap.getWidth(); x++)
        {
            int c = bitmap.getPixel(x, y);
            bitmap_column[pixelCount] = c;
            pixelCount++;
        }
    }

    return bitmap_column;
}
        </code></pre>
      </div>

      <p> Iterate the process for all the images of our database and put all of them in a new set called <b> S = {&#915;<sub>1</sub>, &#915;<sub>2</sub>, ..., &#915;<sub>M</sub>}</b>, where M is the number of all the database images.</p>

      <p> What it is interests for us it is to consider the difference between each subject face of the database. So we need to calculate a new array that represent the <b> <i> face average </i> </b>, let's call it <b>  &Psi; = (1/M) <i style="font-size: 34px;">&Sigma;</i> &#915;<sub>i</sub> </b>, where the sum goes from i= 1 to M). </p>

      <p> Let's translate it into code as a new method that we will call <code> calculateFaceAverage </code>for the Eigenfaces class (must be after the last step of the asyncronous call); it will take as input argument the set of all column arrays and the size of our image and it will return the array of face average as a double type : </p> <br>

      <div class="row-full code">
        <pre><code class="language-java line-numbers">
private double[] calculateFaceAverage(int imageSize, List&lt;double[]&gt; set) {

    double[] psi = new double[imageSize * imageSize];

    for (int j = 0; j < set.size(); j++) {
        for (int k = 0; k < set.get(j).length; k++) {
            psi[j] += (1 / M) * set.get(j)[k];
        }
    }

    return psi;
}
      </code></pre>
    </div>

    <p> Go on considering again <b> &#915;<sub>1</sub> </b> and subtract to it the face average array </p>

    <p style="text-align: center"> &Phi;<sub>1</sub> = &#915;<sub>1</sub> - &Psi; </p>

    <p> Repeating the process for each face, focusing on the characteristic that make unique each subjet, we will obtain a new database. We store it in a  <b> 'n <sup>2</sup> x M' </b> matrix. Called that matrix <b> A </b>, it will be the data set who will constitute our training set: </p>

    <p style="text-align: center;"> A = [&Phi;<sub>1</sub>, &Phi;<sub>2</sub>, ..., &Phi;<sub>M</sub>] </p>

    <p> Let's do it through the code by adding a new method called <code> subtractFaceAverageToAnImage </code> that will simply do the subtraction of two array element by element, adding the result to the A matrix of which we have spoken above </p> <br>

    <div class="row-full code">
      <pre><code class="language-java line-numbers">
private double[][] subtractFaceAverageToAnImage(List&lt;double[]&gt; set, double[] phi) {

    double[][] set_less_face_average = null;

    for (int i = 0; i < set.size(); i++) {
        for (int j = 0; j < set.get(i).length; j++) {
            set_less_face_average[i][j] = set.get(i)[j] - phi[j];
        }
    }

    return set_less_face_average;
}
        </code></pre>
      </div>

      <p> The <b> A </b> space has n<sup>2</sup> dimension, we have to reduce it by keeping the information of data dispersion intact. Let's build the covariance matrix: </p>

      <p style="text-align: center;"> C = (1/M) <i style="font-size: 34px;">&Sigma;</i>  &Phi; &Phi;<sup>T</sup> <br>                         where the sum goes from n = 1 to M and both of &Phi; are &Phi; <sub>n</sub>  </p>

      <p>
        It is easy to demonstrate that :
      </p>

      <p style="text-align: center;"> C = (1/M) A A <sup>T</sup> </p>

      <p> To look for the main components of the space, we can look for the eigenvectors of C. After calculating these eigenvalues ​​of A A <sup> T </sup>, we can order them in descending order according to the eigenvectors associated with them. The eigenvectors (which we will also call <b> eigenfaces </b>) associated with the larger eigenvalues ​​will be the ones that most characterize the variance of the training set
      </p>

      <p> To code this part we have made five different functions:
      <br> <br>
      - <code> transposeMatrix </code> : it computes the transposed of a matrix
      <br>
      - <code> productOfTwoMatrix </code>: it computes the product of two matrix
      <br>
      - <code> multiplyMatrixForANumber </code>: it multiplies each element of a matrix by a number
      <br>
      - <code> calculateCovarianceMatrix </code>: it computes the covariance matrix
      <br>
      - <code> calculateEingenvectors </code> : it computes the eigenvalues and eigenvector associated

    </p> <br>

     <div class="row-full code">
       <pre><code class="language-java line-numbers">
private static double[][] transposeMatrix(double[][] m) {

   double[][] temp = new double[m[0].length][m.length];

   for (int i = 0; i < m.length; i++) {
       for (int j = 0; j < m[0].length; j++) {
           temp[j][i] = m[i][j];
       }
   }

   return temp;
}
         </code></pre>
       </div>
       <br>

       <div class="row-full code">
         <pre><code class="language-java line-numbers">
 private static double[][] productOfTwoMatrix(double[][] m1, double[][] m2) {

     int m1_col = m1[0].length;              // m1 columns length
     int m1_row = m1.length;                 // m1 row length
     int m2_col = m2[0].length;              // m2 columns length
     int m2_row = m2.length;                 // m2 row length

     double[][] mResult = new double[m1_row][m2_col];

     // check if it is possible to do matrix multiplication
     if (m1_col != m2_row) {
         return null;
     } else {

         for (int i = 0; i < m1_row; i++) {
             for (int j = 0; j < m2_col; j++) {
                 for (int k = 0; k < m1_col; k++) {
                     mResult[i][j] += m1[i][k] * m2[k][j];
                 }
             }
         }
     }

     return mResult;
 }
           </code></pre>
         </div>
         <br>

         <div class="row-full code">
           <pre><code class="language-java line-numbers">
 private static double[][] multiplyMatrixForANumber(double[][] m, double p) {

     int m_col = m[0].length;              // m1 columns length
     int m_row = m.length;                 // m1 row length

     double[][] mResult = new double[m_row][m_col];

     for (int i = 0; i < m_row; i++) {
         for (int j = 0; j < m_col; j++) {

             mResult[i][j] = p * m[i][j];
         }
     }

     return  mResult;
 }
             </code></pre>
           </div>
           <br>

           <div class="row-full code">
             <pre><code class="language-java line-numbers">
 private double[][] calculateCovarianceMatrix(double[][] set) {

     double[][] covarianceMatrix = null;
     double[][] covarianceMatrix_temp = null;

     double[][] set_transposed = transposeMatrix(set);

     covarianceMatrix_temp = (productOfTwoMatrix(set, set_transposed));

     covarianceMatrix = multiplyMatrixForANumber(covarianceMatrix_temp, (1/M) );

     return covarianceMatrix;
 }
               </code></pre>
             </div>
             <br>


             <div class="row-full code">
               <pre><code class="language-java line-numbers">
public double[][] calculateEigenvector(double[][] m){

   // construct a matrix from a copy of a 2-D array
   Matrix A = constructWithCopy(m);

   EigenvalueDecomposition e = A.eig();

   // the block diagonal eigenvalue matrix
   Matrix diagonal_eigenvalue_matrix = e.getD();

   // the eigenvector matrix
   Matrix eigenvector_matrix = e.getV();

   double temp[][] = eigenvector_matrix.getArray();

   return temp;
}
                 </code></pre>
               </div>

               <dl>
                 <dt> JAMA Library </dt>
                 <dd> For the latest piece of code above, we have used an external library called JAMA ( that it can be easily downloadable at the following link -> <a href="https://math.nist.gov/javanumerics/jama/"> JAMA </a> ). The process to achieve our target is:

                   <br> <br>
                   1. Use the <code> constructWithCopy </code> method to construct a matrix object by coping the input 2-D array;
                   <br>
                   2. create an <code> EigenvalueDecomposition </code> object that construct the eigenvalue decomposition structure to access D and V;
                   <br>
                   3. compute the block diagonal matrix of eigenvalues by getting it from the previous structure with <code> getD()</code>;
                   <br>
                   4. compute the eigenvector matrix by getting it again from the eigenvalue decomposition structure with <code> getV()</code>;
                   <br>
                   5. finally we are gonna to convert it from a matrix object to a 2-d array with the method  <code> getArray()</code>.
                   <br>
                 </dd>
               </dl>

               <figure>
                 <img src="img/1.3-How_to_install_library.jpg" alt="" />
                 <figcaption> <a href="https://abhiandroid.com/androidstudio/import-add-external-jar-files-android-studio.html"> How to install an external library  </a> </figcaption>
               </figure>






    	</article>
      </div>
    </main>

    <footer id="myFooter">
      <div class="footer">
          <a href="#" class="social-icons"><i class="fab fa-github"></i></i></a>
          <a href="#" class="social-icons"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-icons"><i class="fas fa-envelope"></i></a>

          <ul>
              <li><a href="#">Site Information</a></li>
              <li><a href="#">Contact me</a></li>
              <li><a href="#">Reviews</a></li>
              <li><a href="#">Terms of service</a></li>
          </ul>
          <p class="footer-copyright">© 2018 Mich, Inc. All rights reserved.</p>
      </div>
    </footer>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="https://unpkg.com/ionicons@4.1.2/dist/ionicons.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/prism.min.js"></script>
    <script type="text/javascript" src="../../../../js/menu.js"></script>
    <script type="text/javascript" src="../../../../js/return_to_top_arrow.js"></script>
    <script type="text/javascript" src="../../../../res/prism_themes/prism.js"></script>
  </body>
</html>
